services:
    intprog.repository.service.inner_feature_flag:
        class: IntProg\FeatureFlagBundle\Core\Repository\FeatureFlagService
        public: true
        arguments:
            - '@IntProg\FeatureFlagBundle\Core\Persistence\Cache\Handler'
            - '@translator'
            - '@security.authorization_checker'
            - '%intprog.feature.flag.feature_list%'

    intprog.repository.service.feature_flag:
        alias: 'intprog.repository.service.inner_feature_flag'

    intprog.feature_flag.repository:
        class: IntProg\FeatureFlagBundle\Services\FeatureFlagRepository
        public: true
        arguments:
            - '@intprog.repository.service.feature_flag'
            - '@translator.default'
            - '%intprog.feature.flag.feature_list%'
            - '%ezpublish.siteaccess.groups_by_siteaccess%'
        calls:
            - ['setSiteAccess', ['@ezpublish.siteaccess']]

    intprog.api.role.limitation_type.configuration_scope:
        class: IntProg\FeatureFlagBundle\Core\Limitation\ConfigurationScopeLimitationType
        tags:
            - {name: ezpublish.limitationType, alias: ConfigurationScope}
